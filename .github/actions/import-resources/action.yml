name: Import existing AWS resources
description: "Importa condicionalmente recursos AWS jÃ¡ existentes para o Terraform state."

inputs:
  aws_access_key_id:
    description: AWS Access Key ID
    required: true
  aws_secret_access_key:
    description: AWS Secret Access Key
    required: true
  aws_region:
    description: RegiÃ£o da AWS
    required: true
  project_name:
    description: Nome do projeto
    required: true
  environment:
    description: "Nome do ambiente (ex: dev, prod)"
    required: true
  terraform_path:
    description: Caminho para o diretÃ³rio com os arquivos Terraform e script import.sh (default: terraform)
    required: false
    default: terraform

runs:
  using: composite
  steps:
    # -------------------------------
    # ðŸ”„ IMPORT EXISTING RESOURCES
    # -------------------------------   
    - name: Importar recursos existentes
      shell: bash
      run: |
        bash "${{ inputs.terraform_path }}/scripts/import.sh"
      env:
        AWS_ACCESS_KEY_ID: ${{ inputs.aws_access_key_id }}
        AWS_SECRET_ACCESS_KEY: ${{ inputs.aws_secret_access_key }}
        AWS_REGION: ${{ inputs.aws_region }}
        PROJECT_NAME: ${{ inputs.project_name }}
        ENVIRONMENT: ${{ inputs.environment }}
