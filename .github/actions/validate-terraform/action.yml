name: Validate Terraform configuration
description: "Executa a valida√ß√£o do Terraform para garantir que a configura√ß√£o est√° correta."

runs:
  using: composite
  steps:
    # -------------------------------
    # üîç VALIDA√á√ÉO DO TERRAFORM
    # Garante que a configura√ß√£o est√° sintaticamente correta
    # antes de prosseguir com o plano de execu√ß√£o.
    # -------------------------------      
    - name: Validar sintaxe do Terraform
      shell: bash
      working-directory: terraform
      run: |
        echo "üîç Executando valida√ß√£o do Terraform..."
        if terraform validate; then
          echo "‚úÖ Valida√ß√£o do Terraform conclu√≠da com sucesso."
        else
          echo "‚ùå Valida√ß√£o do Terraform falhou. Corrija os erros antes de continuar."
          exit 1
        fi
